<!-- Autor: Luca Filippi -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Disciplinas - NotaDez</title>
  <link rel="stylesheet" href="style.css">
  <script src="logs.js"></script>
  <script defer src="disciplinas.js"></script>
</head>
<body>
  <header>
    <h1 style="color:white;">Disciplinas</h1>
  </header>

  <div class="container" style="width:90%; max-width:800px;">
    <h2 id="nomeInstituicaoTitulo">Instituição</h2>
    <div id="disciplinasContainer" style="display:flex; flex-wrap:wrap; gap:15px; justify-content:center;"></div>

    <h3 style="margin-top:30px;">Adicionar nova disciplina</h3>
    <input type="text" id="nomeDisciplina" placeholder="Nome da disciplina">
    <input type="text" id="codigoDisciplina" placeholder="Código da disciplina">
    <label for="corDisciplina">Cor de identificação:</label>
    <input type="color" id="corDisciplina" value="#273c75">
    <button onclick="adicionarDisciplina()">Adicionar</button>

  <!-- Botão rápido para voltar à página de Instituições (usuário já logado) -->
  <button style="background:#273c75; margin-top:20px;" onclick="location.href='instituicoes.html'">Ir para Instituições</button>

  <button style="background:#718093; margin-top:20px;" onclick="voltarInstituicoes()">Voltar</button>
  </div>
</body>
  <a href="logs.html" class="log-button">Logs</a>
  <script>
    // fallback navigation: garantir que cliques nos cards vão para turmas.html
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('disciplinasContainer');
      if (!container) return;
      container.addEventListener('click', (e) => {
        // ignorar cliques nos botões de editar/excluir
        if (e.target.closest('.btn-edit') || e.target.closest('.btn-delete')) return;
        // encontrar o card clicado (filho direto do container)
        let el = e.target;
        while (el && el !== container && el.parentElement !== container) el = el.parentElement;
        if (!el || el === container) return;
        const cards = Array.from(container.children);
        const idx = cards.indexOf(el);
        if (idx >= 0) {
          localStorage.setItem('disciplinaSelecionada', idx);
          window.location.href = 'turmas.html';
        }
      });
    });
  </script>
</html>
